@page "/addreservat"
@using Microsoft.AspNetCore.Antiforgery
@using Microsoft.AspNetCore.Authorization
@using Microsoft.AspNetCore.Mvc
@using Newtonsoft.Json
@using System.Net
@inject HttpClient Http
@inject AppState appState 
@using Microsoft.AspNetCore.Antiforgery;
@attribute [AutoValidateAntiforgeryToken] 

 

.. .. .. .. .. ..  
@foreach (var linha in arrayDeLinhas)
{
    @linha
    <br />
}
.. .. .. .. .. ..
 

@code {
    string[] arrayDeLinhas;
    protected override async Task OnInitializedAsync()
    {
        arrayDeLinhas = appState.MyMessageReservation.Split('\n');
    }

    [IgnoreAntiforgeryToken]
    [HttpPost]
    public async Task<ActionResult> Post([FromBody] String jsonString)
    {
        try
        {
            // add reference to Newtonsoft.Json
            //  using Newtonsoft.Json;

            // jsonString to myJsonObj
            //var myJsonObj = JsonConvert.DeserializeObject<Dictionary<string, dynamic>>(jsonString);

            // value1 is myJsonObj[key1]

            /* teste = jsonString */;
            appState.MyMessageReservation += jsonString.ToString();

            return null;
        }
        catch (Exception ex)
        {
            return null;
        }

    }

     
}   