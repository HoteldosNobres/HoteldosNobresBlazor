@page "/"
@inject AppState appState
@inject Blazored.LocalStorage.ILocalStorageService localStorage
@inject NavigationManager NavigationManagerHome

@inject IJSRuntime JS


@inject IdentityRedirectManager RedirectManager

<PageTitle>Home</PageTitle>

<MudMainContent Class="pt-16 px-16">
    <MudContainer Class="mt-6">
        <MudPaper Class="d-flex flex-column align-center justify-center mud-width-full py-8">
            <h1>Hello, world!</h1>

            Welcome to your new app.

            @foreach (var linha in arrayDeLinhas)
            {
                @linha
                <br />
            }

            <button class="btn btn-primary" @onclick="HandleSubmit">Click me 2</button>
        </MudPaper>
    </MudContainer>
</MudMainContent>

@code
{
    string[] arrayDeLinhas;

    protected override async Task OnInitializedAsync()
    {
        arrayDeLinhas = appState.MyMessage.Split('\n');

        // var cookieContent = await localStorage.GetItemAsync<string>("cookietheme");

        // if (cookieContent == null)
        // {
        //     await JS.InvokeVoidAsync("toggleTheme");
        // }
        // else
        // {
        //     await JS.InvokeVoidAsync("toggleTheme", cookieContent);
        // }

    }

    private async Task HandleSubmit()
    {
        // await localStorage.SetItemAsync("cookietheme", "dark");
    }

    protected override async Task OnAfterRenderAsync(bool firstRender)
    {
        // var cookieContent = await localStorage.GetItemAsync<string>("cookietheme");

        // if (cookieContent == null)
        // {
        //     Console.WriteLine("Cookie is Theme");
        // }
        // else
        // {
        //     Console.WriteLine("We have a cookie with contents: " + cookieContent);
        // }

        // if (cookieContent == null)
        // {
        //     await JS.InvokeVoidAsync("toggleTheme");
        // }
        // else
        // {
        //     await JS.InvokeVoidAsync("toggleTheme", cookieContent);
        // }
    }
} 